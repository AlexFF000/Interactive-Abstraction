
/* CPU test with 32 bit A addressing modes for GTO, RED, WRT */


# RED TEST
ADD 50
WRT 4000000000
AND 0
ADD 238
WRT 2000
AND 0
ADD 107
WRT 2001
AND 0
ADD 40
WRT 2002
AND 0
WRT 2003
RED A 2000
OUT
END

# WRT TEST
ADD 238
WRT 2000
AND 0
ADD 107
WRT 2001
AND 0
ADD 40
WRT 2002
AND 0
WRT 2003
AND 0
ADD 50
WRT A 2000
AND 0
OUT A 4,000,000,000
END

# GTO TEST (Also modified for BIZ, BIC, BIO, BIN)
ADD 208
WRT 4,000,000,000
AND 0
ADD 240
WRT 4,000,000,001
AND 0
ADD 238
WRT 2000
AND 0
ADD 107
WRT 2001
AND 0
ADD 40
WRT 2002
AND 0
WRT 2003
AND 0
ADD 50
GTO A 2000
END


/* Code Generator tests */


checkEqual test

ADD 203
WRT 900
WRT 910
AND 0
ADD 121
WRT 901
WRT 911
AND 0
WRT 902
WRT 912
ADD 52
WRT 903
WRT 913
AND 0
RED 900
SUB A 910
ADD 255
BIC #unEqual
AND 0
RED 901
SUB A 911
ADD 255
BIC #unEqual
AND 0
RED 902
SUB A 912
ADD 255
BIC #unEqual
AND 0
RED 903
SUB A 913
ADD 255
BIC #unEqual
AND 0
GTO #isEqual
END
#isEqual ADD 8
OUT
END
#unEqual AND 0
ADD 1
OUT
END

checkZero test

ADD 1
WRT 4,000,000,003
WRT 4,000,000,002
AND 0
BOR A 4000000000
BOR A 4000000001
BOR A 4000000002
BOR A 4000000003
BIZ #isZero
GTO #isNotZero
END
#isZero ADD 255
OUT
END
#isNotZero AND 0
ADD 1
OUT
END

// isGreater constant procedure test

GTO #loadRegisters
#isGreater AND 0
ADD 255
OUT
END
#notGreater AND 0
ADD 1
OUT
END
#loadRegisters AND 0
ADD #isGreater
WRT 4294897563
AND 0
ADD #notGreater
WRT 4294897559
AND 0
ADD 124
WRT 4294897528
AND 0
ADD 245
WRT 4294897529
AND 0
ADD 160
WRT 4294897530
AND 0
ADD 65
WRT 4294897531
AND 0
ADD 125
WRT 4294897532
AND 0
ADD 3
WRT 4294897533
AND 0
ADD 186
WRT 4294897534
AND 0
ADD 178
WRT 4294897535
#checkGreater RED 4294897528
XOR A 4294897532
BIZ #checkGreater_byte2
GTO #checkGreater_check
#checkGreater_byte2 RED 4294897529
XOR A 4294897533
BIZ #checkGreater_byte3
RED 4294897529
WRT 4294897528
RED 4294897533
WRT 4294897532
GTO #checkGreater_check
#checkGreater_byte3 RED 4294897530
XOR A 4294897534
BIZ #checkGreater_byte4
RED 4294897530
WRT 4294897528
RED 4294897534
WRT 4294897532
GTO #checkGreater_check
#checkGreater_byte4 RED 4294897531
XOR A 4294897535
BIZ A 4294897556
RED 4294897531
WRT 4294897528
RED 4294897535
WRT 4294897532
GTO #checkGreater_check
#checkGreater_check RED 4294897528
BOR 0
BIN #checkGreater_x_neg
RED 4294897532
BOR 0
BIN A 4294897556
#checkGreater_same_sign RED 4294897528
SUB A 4294897532
BIN A 4294897556
GTO A 4294897560
#checkGreater_x_neg RED 4294897532
BOR 0
BIN #checkGreater_same_sign
GTO A 4294897560